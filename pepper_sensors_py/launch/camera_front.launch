<launch>
  <env name="PYTHONPATH" value="$(env PYTHONPATH)" />
  <arg name="nao_ip" default="$(optenv NAO_IP 127.0.0.1)" />
  <arg name="nao_port" default="$(optenv NAO_PORT 9559)" />
  <arg name="ns" default="" /> <!-- front camera -->
  <arg name="source" default="0" /> <!-- front camera -->
  <arg name="color_space" default="13" />
  <arg name="resolution" default="1" />
  <arg name="frame_rate" default="10" />
  <arg name="use_ros_time" default="True" />
  <arg name="auto_exposition" default="1" />
  <arg name="auto_exposure_algo" default="0" />
  <arg name="exposure" default="128" />
  <arg name="gain" default="32" />
  <arg name="brightness" default="16" />
  <arg name="contrast" default="32" />
  <arg name="saturation" default="48" />
  <arg name="hue" default="0" />
  <arg name="sharpness" default="0" />
  <arg name="auto_white_balance" default="1" />
  <arg name="white_balance" default="-50" />
  <arg name="convert_yuv422" default="False" />
  <arg name="calibration_file_top" default="file://$(find pepper_sensors_py)/share/nao_camera_top_640x480.yaml" />
  <node pkg="naoqi_sensors_py" type="camera.py" name="camera" required="true" args="--pip=$(arg nao_ip) --pport=$(arg nao_port)" output="screen">
    <param name="calibration_file_top" type="string" value="$(arg calibration_file_top)" />
    <param name="resolution" type="int" value="$(arg resolution)" /> <!--QQVGA=0, QVGA=1, VGA=2 -->
    <param name="color_space" type="int" value="$(arg color_space)" /> <!-- 9 = YUV422, 11 = RGB, 13 = BGR -->
    <param name="frame_rate" type="int" value="$(arg frame_rate)" />
    <param name="source" type="int" value="$(arg source)" /> --> <!-- 0 = top, 1 = bottom -->
    <param name="auto_exposition" type="int" value="$(arg auto_exposition)" /> <!-- 0 = off, 1 = auto -->
    <param name="auto_exposure_algo" type="int" value="$(arg auto_exposure_algo)" /> <!-- 0 = average, 1 = weighted, 2 = adaptive hightlights, 3 = adaptive lowlights-->
    <param name="exposure" type="int" value="$(arg exposure)" />
    <param name="gain" type="int" value="$(arg gain)" />
    <param name="brightness" type="int" value="$(arg brightness)" />
    <param name="contrast" type="int" value="$(arg contrast)" />
    <param name="saturation" type="int" value="$(arg saturation)" />
    <param name="hue" type="int" value="$(arg hue)" />
    <param name="sharpness" type="int" value="$(arg sharpness)" />
    <param name="auto_white_balance" type="int" value="$(arg auto_white_balance)" />
    <param name="white_balance" type="int" value="$(arg white_balance)" />
    <param name="use_ros_time" type="bool" value="$(arg use_ros_time)" />
    <param name="convert_yuv422" type="bool" value="$(arg convert_yuv422)" />
  </node>

  <group ns="camera">

    <node pkg="nodelet" type="nodelet" name="standalone_nodelet_cam_top"  args="manager" />
    <arg name="respawn" default="false" />
    <arg if="$(arg respawn)" name="bond" value="" />
    <arg unless="$(arg respawn)" name="bond" value="--no-bond" />

    <!-- Rectify color images - need to remap default topics -->
    <node pkg="nodelet" type="nodelet" name="rectify_color" args="load image_proc/rectify standalone_nodelet_cam_top" >
      <remap from="image_mono" to="image_raw" />
    </node>

  </group>
</launch>
